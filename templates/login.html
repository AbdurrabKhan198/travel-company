{% extends "base.html" %}
{% block content %}

<!-- ===== Login Section ===== -->
<section class="min-vh-100 d-flex align-items-center justify-content-center position-relative overflow-hidden" 
         style="background: linear-gradient(135deg,#0ea5e9,#38bdf8);">

  <!-- Floating Decorative Circles -->
  <div class="bg-circle position-absolute top-0 start-0 translate-middle rounded-circle"></div>
  <div class="bg-circle position-absolute bottom-0 end-0 translate-middle rounded-circle"></div>

  <div class="container position-relative" style="z-index: 2;">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">

        <!-- Glassmorphic Login Card -->
        <div class="card border-0 shadow-lg glass-card animate__animated animate__fadeInUp">
          <div class="card-body p-5">

            <div class="text-center mb-4">
              <div class="plane-icon mb-3">✈️</div>
              <h2 class="fw-bold text-sky">Welcome Back</h2>
              <p class="text-muted small">Login to continue your journey with Safar Zone Travels</p>
            </div>

            <form method="post" action="{% url 'login' %}" id="loginForm" novalidate>
              {% csrf_token %}
              <div class="form-floating mb-3">
                <input type="email" class="form-control" id="username" name="username" placeholder="Email" required>
                <label for="username">Email address</label>
              </div>

              <div class="form-floating mb-4">
                <input type="password" class="form-control" id="password" name="password" placeholder="Password" required>
                <label for="password">Password</label>
              </div>
              <input type="hidden" name="next" value="{{ request.GET.next }}">

              <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="remember">
                  <label class="form-check-label small" for="remember">Remember me</label>
                </div>
                <a href="#" class="text-sky text-decoration-none small">Forgot Password?</a>
              </div>

              <div class="d-grid">
                <button type="submit" class="btn btn-sky btn-lg fw-semibold shadow-sm" id="loginButton">
                  <span class="spinner-border spinner-border-sm d-none" id="loginSpinner" role="status" aria-hidden="true"></span>
                  <span id="loginText">Login</span>
                </button>
              </div>
            </form>

            <p class="text-center mt-4 text-muted">
              Don’t have an account?
              <a href="/signup" class="text-sky fw-semibold text-decoration-none">Sign Up</a>
            </p>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- ===== Custom Styles & Animations ===== -->
<style>
  @import url("https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css");

  .btn-sky { background-color:#0ea5e9; color:#fff; border:none; }
  .btn-sky:hover { background-color:#0284c7; }

  .text-sky { color:#0ea5e9; }

  .glass-card {
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(12px);
    border-radius: 20px;
  }

  .bg-circle {
    width: 450px; height: 450px;
    background: rgba(255,255,255,0.2);
    filter: blur(100px);
    z-index: 0;
  }

  .plane-icon {
    font-size: 2.5rem;
    color: #fff;
    animation: planeFloat 4s ease-in-out infinite;
  }

  @keyframes planeFloat {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px) rotate(3deg); }
    100% { transform: translateY(0); }
  }

  /* Input Styling */
  .form-control {
    background-color: rgba(255,255,255,0.8);
    border: none;
    border-radius: 10px;
  }
  .form-control:focus {
    background-color: #fff;
    box-shadow: 0 0 0 0.25rem rgba(56,189,248,0.25);
  }
</style>

<!-- ===== Bootstrap & JS Animation ===== -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('loginForm');
    const loginButton = document.getElementById('loginButton');
    const loginSpinner = document.getElementById('loginSpinner');
    const loginText = document.getElementById('loginText');
    
    loginForm.addEventListener('submit', function(e) {
      // Client-side validation
      if (!this.checkValidity()) {
        e.preventDefault();
        e.stopPropagation();
        this.classList.add('was-validated');
        return;
      }
      
      // Show loading state
      if (loginButton && loginSpinner && loginText) {
        loginButton.disabled = true;
        loginSpinner.classList.remove('d-none');
        loginText.textContent = 'Signing in...';
      }
      
      // Form will submit normally to Django backend
    });
    
    // Add animation to form elements
    const formGroups = document.querySelectorAll('.form-floating');
    formGroups.forEach((group, index) => {
      group.style.opacity = '0';
      group.style.transform = 'translateY(20px)';
      group.style.transition = `all 0.5s ease ${index * 0.1}s`;
      
      setTimeout(() => {
        group.style.opacity = '1';
        group.style.transform = 'translateY(0)';
      }, 100);
    });
  });
</script>

{% endblock %}
