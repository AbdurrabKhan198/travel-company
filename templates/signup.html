{% extends "base.html" %}
{% block content %}

<!-- ===== Signup Section ===== -->
<section class="min-vh-100 d-flex align-items-center justify-content-center position-relative overflow-hidden" 
         style="background: linear-gradient(135deg,#0ea5e9,#38bdf8);">

  <!-- Floating Decorative Circles -->
  <div class="bg-circle position-absolute top-0 start-0 translate-middle rounded-circle"></div>
  <div class="bg-circle position-absolute bottom-0 end-0 translate-middle rounded-circle"></div>

  <div class="container position-relative" style="z-index: 2;">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">

        <!-- Glassmorphic Signup Card -->
        <div class="card border-0 shadow-lg glass-card animate__animated animate__fadeInUp">
          <div class="card-body p-5">

            <div class="text-center mb-4">
              <div class="plane-icon mb-3">✈️</div>
              <h2 class="fw-bold text-sky">Create Your Account</h2>
              <p class="text-muted small">Join Safar Zone Travels and start your journey</p>
            </div>

            {% if messages %}
            <div class="alert alert-warning">
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            </div>
            {% endif %}

            <form method="post" id="signupForm" novalidate>
              {% csrf_token %}
              
              <div class="form-floating mb-3">
                {{ form.full_name }}
                <label for="{{ form.full_name.id_for_label }}">Full Name</label>
                {% if form.full_name.errors %}
                  <div class="text-danger small">{{ form.full_name.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="form-floating mb-3">
                {{ form.email }}
                <label for="{{ form.email.id_for_label }}">Email address</label>
                {% if form.email.errors %}
                  <div class="text-danger small">{{ form.email.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="form-floating mb-3">
                {{ form.phone }}
                <label for="{{ form.phone.id_for_label }}">Phone Number</label>
                {% if form.phone.errors %}
                  <div class="text-danger small">{{ form.phone.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="form-floating mb-3">
                {{ form.aadhar_number }}
                <label for="{{ form.aadhar_number.id_for_label }}">AADHAR Number</label>
                {% if form.aadhar_number.errors %}
                  <div class="text-danger small">{{ form.aadhar_number.errors.0 }}</div>
                {% endif %}
                <div class="form-text">12-digit Aadhar number (digits only)</div>
              </div>

              <div class="form-floating mb-3">
                {{ form.password1 }}
                <label for="{{ form.password1.id_for_label }}">Password</label>
                {% if form.password1.errors %}
                  <div class="text-danger small">{{ form.password1.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="form-floating mb-4">
                {{ form.password2 }}
                <label for="{{ form.password2.id_for_label }}">Confirm Password</label>
                {% if form.password2.errors %}
                  <div class="text-danger small">{{ form.password2.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="form-check mb-4">
                {{ form.terms_accepted }}
                <label class="form-check-label" for="{{ form.terms_accepted.id_for_label }}">
                  I agree to the <a href="#" class="text-sky">Terms of Service</a> and <a href="#" class="text-sky">Privacy Policy</a>
                </label>
                {% if form.terms_accepted.errors %}
                  <div class="text-danger small">{{ form.terms_accepted.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="d-grid">
                <button type="submit" class="btn btn-sky btn-lg fw-semibold shadow-sm" id="submitBtn">
                  <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                  <span class="btn-text">Sign Up</span>
                </button>
              </div>
            </form>

            <p class="text-center mt-4 text-muted">
              Already have an account?
              <a href="/login" class="text-sky fw-semibold text-decoration-none">Login</a>
            </p>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- ===== Custom Styles & Animations ===== -->
<style>
  @import url("https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css");

  .btn-sky { background-color:#0ea5e9; color:#fff; border:none; }
  .btn-sky:hover { background-color:#0284c7; }

  .text-sky { color:#0ea5e9; }

  .glass-card {
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(12px);
    border-radius: 20px;
  }

  .bg-circle {
    width: 450px; height: 450px;
    background: rgba(255,255,255,0.2);
    filter: blur(100px);
    z-index: 0;
  }

  .plane-icon {
    font-size: 2.5rem;
    color: #fff;
    animation: planeFloat 4s ease-in-out infinite;
  }

  @keyframes planeFloat {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px) rotate(3deg); }
    100% { transform: translateY(0); }
  }

  /* Form input effects */
  .form-control {
    background-color: rgba(255,255,255,0.8);
    border: none;
    border-radius: 10px;
  }
  .form-control:focus {
    background-color: #fff;
    box-shadow: 0 0 0 0.25rem rgba(56,189,248,0.25);
  }
</style>

<!-- ===== Bootstrap & Validation Script ===== -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const signupForm = document.getElementById('signupForm');
    const submitBtn = document.getElementById('submitBtn');
    const btnText = submitBtn.querySelector('.btn-text');
    const spinner = submitBtn.querySelector('.spinner-border');

    // Add form validation styles
    const formInputs = signupForm.querySelectorAll('.form-control');
    formInputs.forEach(input => {
      input.classList.add('form-control-lg');
      
      // Add validation classes on blur
      input.addEventListener('blur', function() {
        if (this.checkValidity()) {
          this.classList.remove('is-invalid');
          this.classList.add('is-valid');
        } else {
          this.classList.remove('is-valid');
          this.classList.add('is-invalid');
        }
      });
    });

    // Handle form submission
    signupForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Show loading state
      submitBtn.disabled = true;
      btnText.textContent = 'Creating Account...';
      spinner.classList.remove('d-none');
      
      // Submit the form
      this.submit();
    });
  });
</script>

{% endblock %}
